{{ form_start(form) }}
    {{ form_widget(form) }}

    <div class="form-group row">
        <div class="col-lg-4 col-lg-offset-2">
            <a class="btn btn-white btn-sm" href="{{ path('app_admin_post_index') }}">back to list</a>
            <button class="btn btn-primary btn-sm" type="submit">{{ button_label|default('Save') }}</button>

            {% if post.id > 0 %}
                {{ include('admin/post/_delete_form.html.twig') }}
            {% endif %}
        </div>
    </div>
{{ form_end(form) }}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.4/dist/css/datepicker.min.css">
<script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.4/dist/js/datepicker-full.min.js"></script>

<script>
    const elem = document.querySelector('#post_publishedAt');
    const datepicker = new Datepicker(elem, {
        // ...options
    });

    $(function(){
        const $summerNote = $('#post_content').summernote({
            //Define the callback
            callbacks: {
                onImageUpload: function(files) {
                    const file = files[0];

                    let data = new FormData();
                    data.append("file", file);

                    $.ajax({
                        data: data,
                        type: "POST",
                        url: "{{ path('admin_file_uploader') }}", //Your own back-end uploader
                        cache: false,
                        contentType: false,
                        processData: false,
                        success: function(response) {
                            if (response.status && response.filename) {
                                //$('.summernote').summernote('editor.insertImage', response.filename);
                                let img = new Image;
                                img.src = response.filename;

                                $summerNote.summernote('insertNode', img);
                            }
                        }
                    });
                },
            },
        });
    })
</script>
